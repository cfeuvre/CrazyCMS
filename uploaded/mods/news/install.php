<?php/*Copyright CrazyCMS : Valmori Quentin	quentin.valmori@gmail.comFeuvre Christophe	neowan@live.frHaustrate Kevin	gippel5@hotmail.comThis software is a computer program whose purpose is to make our own website. You just have to follow the automatic installation procedureand you website is operational. Moreover, He is securized and optimized as much as possible.This software is governed by the CeCILL² license under French law andabiding by the rules of distribution of free software.  You can  use, modify and/ or redistribute the software under the terms of the CeCILL²license as circulated by CEA, CNRS and INRIA at the following URL"http://www.cecill.info". The fact that you are presently reading this means that you have hadknowledge of the CeCILL² license and that you accept its terms.*//*FICHIER D'INSTALLATION DU MOD NEWS*/// On vérifie que tous les fichiers nécessaires au fonctionnement du forum marchent ;)if(file_exists($rep.'/mods/news/admin.php') && file_exists($rep.'/mods/news/allnews.php') && file_exists($rep.'/mods/news/gestion.php') && file_exists($rep.'/mods/news/index.php') && file_exists($rep.'/mods/news/post_comment.php') && file_exists($rep.'/mods/news/viewnews.php')){//Requete pour supprimer permissions forums si y sont déja ( vu qu'on va les remettre vaut mieux qu'elle ne soient pas en double );$Bdd->sql('DELETE FROM '.PT.'_permissions WHERE element="news"' );// Ajout des permissions relatives au forum$Bdd->sql('INSERT INTO '.PT.'_permissions VALUES ("", "poster_news", "'.POST_A_NEWS.'", "news", "module")' );$Bdd->sql('INSERT INTO '.PT.'_permissions VALUES ("", "poster_comment", "'.POST_A_COMMENT.'", "news", "module")' );$Bdd->sql('INSERT INTO '.PT.'_parametres VALUES ("", "news_grade_admin","3")' );$Bdd->sql('INSERT INTO '.PT.'_parametres VALUES ("", "news_to_forum","0")' );$Bdd->sql('INSERT INTO '.PT.'_parametres VALUES ("", "news_to_forum_cat","0")' );$Bdd->sql('INSERT INTO '.PT.'_parametres VALUES ("", "news_to_forum_cat_name","News")' );// ajotu des parametres relatifs au module de News$Bdd->sql('INSERT INTO '.PT.'_parametres VALUES ("", "nb_news", "15")' );$Bdd->sql('CREATE TABLE IF NOT EXISTS '.PT.'_comment (  id int(11) NOT NULL auto_increment,  parent int(11) NOT NULL default "0",  contenu text NOT NULL,  date int(11) NOT NULL default "0",  auteur varchar(255) NOT NULL default "",  smileys int(1) NOT NULL default "0",   PRIMARY KEY  (id))' );$Bdd->sql('CREATE TABLE IF NOT EXISTS '.PT.'_news (  id int(11) NOT NULL auto_increment,  titre varchar(255) NOT NULL default "",  date int(11) default NULL,  publication int(11) default NULL,  auteur smallint(4) NOT NULL,  parent int(11) NOT NULL default "0",  contenu text NOT NULL,  hit int(11) NOT NULL default "0",  smileys int(1) NOT NULL default "0",  groupes text NOT NULL,  comments int(11) NOT NULL default "0",  add_coment int(1) NOT NULL default "0",  valid int(2) NOT NULL default "0",  PRIMARY KEY  (id))' );$Bdd->sql('INSERT INTO '.PT.'_news VALUES ("", "'.FIRST_NEWS_DEF.'", 1172752852, 1172752852, "2", 0, "'.FIRST_NEWS_CONTENU.'", 0, 1, "", 0, 1, 1)' );	$cont .= '<font color="green">'.NEWS_SUCCESS.'</font>';}else{if(file_exists($rep.'/mods/news/admin.php') && file_exists($rep.'/mods/news/allnews.php') && file_exists($rep.'/mods/news/gestion.php') && file_exists($rep.'/mods/news/index.php') && file_exists($rep.'/mods/news/post_comment.php')  && file_exists($rep.'/mods/news/viewnews.php')){	$cont .= NEWS_ERROR.'<br />';if(!file_exists($rep.'/mods/news/allnews.php')){	$cont .= ' - '.file.' "allnews.php" '.is_requis.' <br />';}if(!file_exists($rep.'/mods/news/gestion.php')){	$cont .= ' - '.file.' "gestion.php" '.is_requis.'<br />';}if(!file_exists($rep.'/mods/news/admin.php')){	$cont .= ' - '.file.' "admin.php" '.is_requis.'<br />';}if(!file_exists($rep.'/mods/news/index.php')){	$cont .= ' - '.file.' "index.php" '.is_requis.'<br />';}if(!file_exists($rep.'/mods/news/post_comment.php')){	$cont .= ' - '.file.' "post_comment.php" '.is_requis.'<br />';}if(!file_exists($rep.'/mods/news/viewnews.php')){	$cont .= ' - '.file.' "viewnews.php" '.is_requis.'<br />';}}}?>